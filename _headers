# Cloudflare Pages 安全標頭配置
# 這個檔案會自動被 Cloudflare Pages 讀取並應用

# 針對所有頁面的安全標頭
/*
  # CORS 設定 - 限制來源，移除過於寬鬆的 *
  Access-Control-Allow-Origin: https://cardioanalytics.twinhao.com
  Access-Control-Allow-Methods: GET, OPTIONS
  Access-Control-Allow-Headers: Content-Type
  Access-Control-Max-Age: 1800

  # Content Security Policy - 已移除 unsafe-inline
  Content-Security-Policy: default-src 'self'; style-src 'self'; script-src 'self'; img-src 'self' data:; font-src 'self'; connect-src 'self'; object-src 'none'; frame-ancestors 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests;

  # X-Frame-Options - 防止點擊劫持
  X-Frame-Options: DENY

  # X-Content-Type-Options - 防止 MIME 類型嗅探
  X-Content-Type-Options: nosniff

  # Referrer Policy - 控制 Referrer 資訊
  Referrer-Policy: strict-origin-when-cross-origin

  # Permissions Policy - 限制瀏覽器功能
  Permissions-Policy: geolocation=(), microphone=(), camera=(), payment=()

  # Cache-Control - 適當的快取設定（針對敏感內容禁止快取）
  Cache-Control: no-store, no-cache, must-revalidate, private

# 針對 HTML 檔案的快取設定（禁止快取敏感內容）
/*.html
  Cache-Control: no-store, no-cache, must-revalidate, private

# 針對靜態資源的快取設定（較長的快取時間）
/*.css
  Cache-Control: public, max-age=31536000, immutable

/*.js
  Cache-Control: public, max-age=31536000, immutable

# 針對首頁的快取設定（禁止快取）
/
  Cache-Control: no-store, no-cache, must-revalidate, private
